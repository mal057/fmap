name = "fmap-api"
main = "src/index.ts"
compatibility_date = "2023-12-18"

# R2 bucket binding
[[r2_buckets]]
binding = "WAYPOINTS_BUCKET"
bucket_name = "fmap-waypoints"
preview_bucket_name = "fmap-waypoints-preview"

# Environment variables
# IMPORTANT: Do NOT commit sensitive keys to version control
# Set SUPABASE_SERVICE_KEY using: wrangler secret put SUPABASE_SERVICE_KEY
[vars]
ENVIRONMENT = "development"
SUPABASE_URL = "https://your-project.supabase.co"
SUPABASE_ANON_KEY = "your-anon-key-here"

# Production environment
[env.production]
name = "fmap-api-production"
vars = { ENVIRONMENT = "production", SUPABASE_URL = "https://your-project.supabase.co", SUPABASE_ANON_KEY = "your-production-anon-key" }

# CORS configuration
[cors]
origins = ["*"]
methods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
allow_headers = ["Content-Type", "Authorization"]
